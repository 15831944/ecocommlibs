<!DOCTYPE html> <!--[if IE 9]><html class="no-js lt-ie10" lang="en"><![endif]--> <!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]--> <head> <meta charset="utf-8"> <meta content="IE=edge" http-equiv="X-UA-Compatible"> <meta content="nanoc 3.8.0" name="generator"> <meta content="notranslate" name="google"> <title>Tutorial | MyScript SDK Documentation</title> <meta content="Learn how to perform recognition with MyScript and get an overview of the whole process." name="description"> <meta content="width=device-width, initial-scale=1.0" name="viewport"> <link href="../favicon.ico" rel="icon"> <link href="../favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"> <link href="../favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"> <link href="../favicon-48x48.png" rel="icon" sizes="48x48" type="image/png"> <link href="../favicon-64x64.png" rel="icon" sizes="64x64" type="image/png"> <link href="../favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"> <link href="../android-128x128.png" rel="icon" sizes="128x128"> <link href="../android-192x192.png" rel="icon" sizes="192x192"> <link href="../apple-touch-icon-60x60.png" rel="apple-touch-icon" sizes="60x60"> <link href="../apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120"> <link href="../apple-touch-icon-180x180.png" rel="apple-touch-icon" sizes="180x180"> <link href="../apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76"> <link href="../apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152"> <link color="#00A7CF" href="../safari-icon.svg" rel="mask-icon"> <meta content="Tutorial | MyScript SDK Documentation" name="application-name"> <meta content="#00A7CF" name="msapplication-TileColor"> <meta content="../myscript-tile-small.png" name="msapplication-square70x70logo"> <meta content="../myscript-tile-medium.png" name="msapplication-square150x150logo"> <meta content="../myscript-tile-wide.png" name="msapplication-wide310x150logo"> <meta content="../myscript-tile-large.png" name="msapplication-square310x310logo"> <link href="../css/main.css?822045956" rel="stylesheet"> <script src="../js/all.js?274668692"></script> </head> <body> <a class="sr-only" href="#content">skip to content</a> <a id="top"></a> <header class="header"> <nav class="primary-nav navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header"> <button class="navbar-toggle" data-target="#secondary-nav" data-toggle="collapse" type="button"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="../index.html">MyScript SDK Documentation</a> </div> <div class="collapse navbar-collapse" id="primary-nav"> <ul class="nav navbar-nav navbar-right"> <li><a href="../index.html">Welcome</a></li> <li><a href="../install.html">Install</a></li> <li><a href="../technology.html">Technology</a></li> <li class="active"><a href="../sdk.html">SDK</a></li> <li><a href="../api.html">API</a></li> <li><a href="../tools.html">Tools</a></li> <li><a href="../glossary.html">Glossary</a></li> </ul> </div> </div> </nav> <nav class="secondary-nav navbar navbar-default navbar-static-top navbar-inverse" role="navigation"> <div class="container"> <div class="collapse navbar-collapse" id="secondary-nav"> <ul class="nav navbar-nav navbar-right"> <li class="active"><a href="tutorial.html">Tutorial</a></li> <li><a href="text.html">Text</a></li> <li><a href="superimposed.html">Superimposed</a></li> <li><a href="math.html">Math</a></li> <li><a href="shape.html">Shape</a></li> <li><a href="music.html">Music</a></li> <li><a href="document.html">Document Model</a></li> <li><a href="ink.html">Ink</a></li> <li><a href="gesture.html">Gesture</a></li> <li><a href="keyboard.html">Keyboard</a></li> </ul> </div> </div> </nav> </header> <!--[if lt IE 9 ]><div class="container browser-upgrade alert alert-danger alert-dismissable"> <button aria-hidden="true" class="close" data-dismiss="alert" type="button">&times;</button> You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade</a> to improve your experience. </div><![endif]--> <header class="jumbotron secondary"> <div class="container"> <h1 class="title">Tutorial</h1> <p>Learn how to perform recognition with MyScript and get an overview of the whole process.</p> </div> </header> <main class="container" id="content"> <div class="row page"> <div class="col-md-9 col-md-push-3" role="main"> <nav class="breadcrumb" role="navigation"> <li><a href="../sdk.html">SDK</a></li> <li><span class="active" title="You're here.">Tutorial</span></li> </nav> <article class="page"> <p>This tutorial shows how to perform the recognition of a digital handwritten sample with MyScript. It gives the main steps to follow, based on the sample code provided in <code>edk/c/examples/math/MathRecognition.c</code>. Should you need details on installation, check out the <a href="../install.html">Install</a> section.</p> <h2 id="setting-the-certificate">Setting the certificate</h2> <p>A valid certificate is necessary to use MyScript SDKs. To learn how to set the certificate, check out the <a href="../install.html">Install</a> section.</p> <h2 id="creating-an-engine">Creating an engine</h2> <p>The first step consists in creating an engine. To do so, you need to call the appropriate function with the certificate as a parameter.</p> <ul class="nav nav-tabs"> <li class="active"><a data-toggle="tab" href="#tab-1-C">C</a></li> <li><a data-toggle="tab" href="#tab-1-Java">Java</a></li> <li><a data-toggle="tab" href="#tab-1-NET">.NET</a></li> </ul> <div class="tab-content"> <div class="active tab-pane" id="tab-1-C"> <pre><code>voEngine engine = NULL;&#x000A;engine = voCreateEngine(VO_MSE_VER, &amp;myCertificate, NULL);&#x000A;</code></pre> <p>In this example, <code>VO_MSE_VER</code> refers to the version number of MyScript. This information ensures backward compatibility when a new version of the core library is released.</p> <p><code>myCertificate</code> refers to the structure containing the bytes composing your certificate. You thus need to include the declaration of this object beforehand, as:</p> <pre title="Including the certificate declaration"><code>#include "../certificates/MyCertificate.h"&#x000A;</code></pre> </div> <div class="tab-pane" id="tab-1-Java"> <pre title="Creating a new engine initialized with your certificate"><code>final Engine engine = Engine.create(MyCertificate.getBytes());&#x000A;</code></pre> <p><code>MyCertificate</code> refers to the structure containing the bytes composing your certificate. You thus need to include the declaration of this object beforehand, as:</p> <pre title="Including the certificate declaration"><code>import certificates.MyCertificate;&#x000A;</code></pre> </div> <div class="tab-pane" id="tab-1-NET"> <pre><code>Engine engine = Engine.Create(MyCertificate.Bytes);&#x000A;</code></pre> <p><code>MyCertificate</code> refers to the structure containing the bytes composing your certificate. You thus need to include the declaration of this object beforehand, as:</p> <pre title="Including the certificate declaration"><code>using certificates;&#x000A;</code></pre> </div> </div> <p><strong>No handwriting recognition can be processed without declaring the certificate</strong>.</p> <h2 id="creating-a-recognizer">Creating a recognizer</h2> <p>Then, you need to define your recognition programming object. The recognizer that you define depends on the type of recognition you want to achieve. See the sections discussed in <a href="../sdk.html">MyScript SDK</a> to have an overview of the different types of recognizer you can create.</p> <ul class="nav nav-tabs"> <li class="active"><a data-toggle="tab" href="#tab-2-C">C</a></li> <li><a data-toggle="tab" href="#tab-2-Java">Java</a></li> <li><a data-toggle="tab" href="#tab-2-NET">.NET</a></li> </ul> <div class="tab-content"> <div class="active tab-pane" id="tab-2-C"> <p>In general, the function used for creating the recognizer follows the syntax: <code>voCreateXXXXXRecognizer</code>, where <code>XXXXX</code> refers to the type of the recognizer.</p> <p>Let’s create a recognizer for recognizing mathematical formulas:</p> <pre title="Creating a new recognizer"><code>recognizer = voCreateMathRecognizer(engine);&#x000A;</code></pre> <p>You need to pass the previously created <code>engine</code> as a parameter to this function.</p> <p>We will need to include in addition to the declaration of the MyScript engine, the declaration of <code>MyScriptMath</code>:</p> <pre title="Including the engine and MyScriptMath declarations"><code>#include MyScriptEngine.h&#x000A;#include MyScriptMath.h&#x000A;</code></pre> </div> <div class="tab-pane" id="tab-2-Java"> <p>In general, the function used for creating the recognizer follows the syntax: <code>XXXXXRecognizer.create</code>, where <code>XXXXX</code> refers to the type of the recognizer.</p> <p>Let’s create a recognizer for recognizing mathematical formulas:</p> <pre title="Creating a new recognizer"><code>final MathRecognizer recognizer = MathRecognizer.create(engine);&#x000A;</code></pre> <p>You need to pass the previously created <code>engine</code> as a parameter to this function.</p> <p>We will need to include in addition to the declaration of the MyScript engine, the declaration of <code>MyScriptMath</code>:</p> <pre title="Including the engine and MyScriptMath declarations"><code>import com.myscript.engine.Engine;&#x000A;import com.myscript.engine.EngineObject;&#x000A;import com.myscript.math.MathDocument;&#x000A;import com.myscript.math.MathAlphabetKnowledge;&#x000A;import com.myscript.math.MathGrammar;&#x000A;import com.myscript.math.MathNode;&#x000A;import com.myscript.math.MathRecognizer;&#x000A;</code></pre> </div> <div class="tab-pane" id="tab-2-NET"> <p>In general, the function used for creating the recognizer follows the syntax: <code>XXXXXRecognizer.Create</code>, where <code>XXXXX</code> refers to the type of the recognizer.</p> <p>Let’s create a recognizer for recognizing mathematical formulas:</p> <pre title="Creating a new recognizer"><code>MathRecognizer recognizer = MathRecognizer.Create(engine);&#x000A;</code></pre> <p>You need to pass the previously created <code>engine</code> as a parameter to this function.</p> <p>We will need to include in addition to the declaration of the MyScript engine, the declaration of <code>MyScriptMath</code>:</p> <pre title="Including the engine and MyScriptMath declarations"><code>using com.myscript.edk.dotNET.math;&#x000A;using com.myscript.engine;&#x000A;using com.myscript.math;&#x000A;</code></pre> </div> </div> <h2 id="attaching-resources">Attaching resources</h2> <p>To recognize <a href="../technology/overview.html#digital-ink">digital ink</a>, a recognizer needs some pre-computed knowledge. This knowledge comes as binary assets that we call <a href="../technology/overview.html#resources"><em>resources</em></a>. Resources are files that have the <code>.res</code> extension.</p> <p>In this example, since you created a Math recognizer, you first need to load the resource that will provide the recognizer with the knowledge of the mathematical symbols. Then, you can attach the resource to the recognizer. These operations are performed by calling the following:</p> <ul class="nav nav-tabs"> <li class="active"><a data-toggle="tab" href="#tab-3-C">C</a></li> <li><a data-toggle="tab" href="#tab-3-Java">Java</a></li> <li><a data-toggle="tab" href="#tab-3-NET">.NET</a></li> </ul> <div class="tab-content"> <div class="active tab-pane" id="tab-3-C"> <pre title="Loading and attaching resources to the recognizer"><code>    ak = loadEngineObject(MATH_AK_RES);&#x000A;    VO_IFACE(engine,IAttachTarget)-&gt;attach(engine, recognizer, ak);&#x000A;</code></pre> </div> <div class="tab-pane" id="tab-3-Java"> <pre title="Loading and attaching resources to the recognizer"><code>final MathAlphabetKnowledge ak = (MathAlphabetKnowledge)EngineObject.load(engine, CFG.MATH_AK_RES);&#x000A;recognizer.attach(ak);&#x000A;</code></pre> </div> <div class="tab-pane" id="tab-3-NET"> <pre title="Loading and attaching resources to the recognizer"><code>MathAlphabetKnowledge ak = (MathAlphabetKnowledge)EngineObject.Load(engine, CFG.MATH_AK_RES);&#x000A;recognizer.Attach(ak);&#x000A;</code></pre> </div> </div> <p>The variable <code>MATH_AK_RES</code> refers to your compiled <code>math-ak.res</code> resource located in <code>resources/math/</code> directory (check the file hierarchy presented in section <a href="../install.html">Install</a>). However, depending on the type of recognizer you have and the type of recognition you want to perform, the resources may differ.</p> <h2 id="creating-a-document">Creating a document</h2> <p>You will need a document to store both ink and the recognition result.</p> <ul class="nav nav-tabs"> <li class="active"><a data-toggle="tab" href="#tab-4-C">C</a></li> <li><a data-toggle="tab" href="#tab-4-Java">Java</a></li> <li><a data-toggle="tab" href="#tab-4-NET">.NET</a></li> </ul> <div class="tab-content"> <div class="active tab-pane" id="tab-4-C"> <p>In general, we use a <code>voCreateXXXXX</code> method, where <code>XXXXX</code> refers to the type of document you want, depending on the type of recognition you perform.</p> <p>In this example, since you created a Math recognizer, you need to use <code>voCreateMathDocument</code> as follows:</p> <pre title="Creating a document object"><code>document = voCreateMathDocument(engine);                                     &#x000A;</code></pre> </div> <div class="tab-pane" id="tab-4-Java"> <p>In general, we use a <code>XXXXX.create</code> method, where <code>XXXXX</code> refers to the type of document you want, depending on the type of recognition you perform.</p> <p>In this example, since you created a Math recognizer, you need to use:</p> <pre title="Creating a document object"><code>final MathDocument document = MathDocument.create(engine);                                                                                                                 &#x000A;</code></pre> </div> <div class="tab-pane" id="tab-4-NET"> <p>In general, we use a <code>MathDocument.Create</code> method, where <code>XXXXX</code> refers to the type of document you want, depending on the type of recognition you perform.</p> <p>In this example, since you created a Math recognizer, you need to use:</p> <pre title="Creating a document object"><code>MathDocument document = MathDocument.Create(engine);                                    &#x000A;</code></pre> </div> </div> <h2 id="sending-the-ink">Sending the ink</h2> <h3 id="getting-the-digital-ink">Getting the digital ink</h3> <p><strong>MyScript does not provide methods for acquiring digital ink</strong>. The sample you want to recognize must be acquired from an appropriate device (a digital pen, a paper-based capture device or a pen-sensitive surface such as a touchscreen).</p> <h3 id="converting-ink-into-a-myscript-compliant-format">Converting ink into a MyScript-compliant format</h3> <p><strong>MyScript does not provide any automatic features for extracting digital ink from devices</strong>. You need to create your own application to do so. In any case, digital ink is presented to MyScript as strokes. The coordinates of the strokes must be in floating point format.</p> <p>For the purpose of this example, let’s define the coordinates of one random built-up stroke:</p> <pre title="Defining a random stroke for this example"><code>// digital ink &#x000A;static float x0[] = {481, 484, 488, 494, 499, 506, 512, 516, 519, 521};&#x000A;static float y0[] = {398, 398, 398, 398, 398, 398, 398, 398, 398, 398};&#x000A;</code></pre> <h3 id="sending-the-ink-1">Sending the ink</h3> <p>At this point, you can send the sample strokes coordinates to the recognizer using the <code>addStroke()</code> function.</p> <ul class="nav nav-tabs"> <li class="active"><a data-toggle="tab" href="#tab-5-C">C</a></li> <li><a data-toggle="tab" href="#tab-5-Java">Java</a></li> <li><a data-toggle="tab" href="#tab-5-NET">.NET</a></li> </ul> <div class="tab-content"> <div class="active tab-pane" id="tab-5-C"> <pre title="Sending a stroke to the recognizer"><code>VO_IFACE(engine,IMath)-&gt;addStroke(engine, document, x0, sizeof(*x0), y0, sizeof(*y0), sizeof(x0)/sizeof(*x0));&#x000A;</code></pre> <p>This adds the first point of the ink. You will need to iterate the call for the second point, the third point, and so on.</p> </div> <div class="tab-pane" id="tab-5-Java"> <pre title="Sending a stroke to the recognizer"><code>document.addStroke(x0, y0);&#x000A;</code></pre> <p>This adds the first point of the ink. You will need to iterate the call for the second point, the third point, and so on.</p> </div> <div class="tab-pane" id="tab-5-NET"> <pre title="Sending a stroke to the recognizer"><code>document.AddStroke(x0, y0);&#x000A;</code></pre> <p>This adds the first point of the ink. You will need to iterate the call for the second point, the third point, and so on.</p> </div> </div> <h2 id="running-the-recognition">Running the recognition</h2> <p>Finally, you can run the <a href="../technology/overview.html#recognition-process">recognition process</a>. Depending on the recognizer, the identifier of the function used for performing the recognition process may differ. Please refer to section <a href="../sdk.html">MyScript SDK</a> to know the function to use according to the recognition task type you target.</p> <p>Here, since you created an Math recognizer, you will use the <code>process()</code> function to perform the recognition process, as follows:</p> <ul class="nav nav-tabs"> <li class="active"><a data-toggle="tab" href="#tab-6-C">C</a></li> <li><a data-toggle="tab" href="#tab-6-Java">Java</a></li> <li><a data-toggle="tab" href="#tab-6-NET">.NET</a></li> </ul> <div class="tab-content"> <div class="active tab-pane" id="tab-6-C"> <pre title="Running the recognition process"><code>VO_IFACE(engine, IMathRecognizer)-&gt;process(engine, recognizer, document, NULL, NULL);&#x000A;</code></pre> </div> <div class="tab-pane" id="tab-6-Java"> <pre title="Running the recognition process"><code>recognizer.process(document);&#x000A;</code></pre> </div> <div class="tab-pane" id="tab-6-NET"> <pre title="Running the recognition process"><code>recognizer.Process(document);&#x000A;</code></pre> </div> </div> <h2 id="getting-the-result">Getting the result</h2> <p>The <a href="../technology/overview.html#output">recognition result</a> has been stored in the <code>document</code> object. You can exploit the result by getting the recognition tree that is stored inside.</p> <p>In this example, i.e. in the case of a mathematical recognition, you will use a function to get the recognition tree:</p> <ul class="nav nav-tabs"> <li class="active"><a data-toggle="tab" href="#tab-7-C">C</a></li> <li><a data-toggle="tab" href="#tab-7-Java">Java</a></li> <li><a data-toggle="tab" href="#tab-7-NET">.NET</a></li> </ul> <div class="tab-content"> <div class="active tab-pane" id="tab-7-C"> <pre title="Getting the recognition tree"><code>root = VO_IFACE(engine, IMath)-&gt;getParseTree(engine, document);&#x000A;</code></pre> </div> <div class="tab-pane" id="tab-7-Java"> <pre title="Getting the recognition tree"><code>final MathNode root = document.getParseTree();&#x000A;</code></pre> </div> <div class="tab-pane" id="tab-7-NET"> <pre title="Getting the recognition tree"><code>MathNode root = document.GetParseTree();&#x000A;</code></pre> </div> </div> <p>From now on, you can exploit the recognition result as you wish.</p> <h2 id="cleaning-up">Cleaning up</h2> <p>When processing is done, you need to clean up the objects created (the recognition tree, the document, the recognizer and the engine):</p> <ul class="nav nav-tabs"> <li class="active"><a data-toggle="tab" href="#tab-8-C">C</a></li> <li><a data-toggle="tab" href="#tab-8-Java">Java</a></li> <li><a data-toggle="tab" href="#tab-8-NET">.NET</a></li> </ul> <div class="tab-content"> <div class="active tab-pane" id="tab-8-C"> <pre title="Cleaning-up: release all created objects and destroy the engine"><code>voReleaseObject(engine, root);                                         &#x000A;voReleaseObject(engine, document);                                     &#x000A;voReleaseObject(engine, recognizer);                                   &#x000A;voDestroyEngine(engine);                                               &#x000A;</code></pre> </div> <div class="tab-pane" id="tab-8-Java"> <pre title="Cleaning-up: release all created objects and destroy the engine"><code>math.dispose();&#x000A;recognizer.dispose();&#x000A;engine.dispose();&#x000A;</code></pre> </div> <div class="tab-pane" id="tab-8-NET"> <pre title="Cleaning-up: release all created objects and destroy the engine"><code>math.Dispose();&#x000A;recognizer.Dispose();&#x000A;engine.Dispose();&#x000A;</code></pre> </div> </div> </article> </div> <div class="col-md-3 col-md-pull-9"> <aside class="sidebar hidden-print" role="complementary"> <nav class="toc" role="navigation"> <ul class="nav"> <li> <a href="#setting-the-certificate">Setting the certificate</a> </li> <li> <a href="#creating-an-engine">Creating an engine</a> </li> <li> <a href="#creating-a-recognizer">Creating a recognizer</a> </li> <li> <a href="#attaching-resources">Attaching resources</a> </li> <li> <a href="#creating-a-document">Creating a document</a> </li> <li> <a href="#sending-the-ink">Sending the ink</a> <ul class="nav"> <li> <a href="#getting-the-digital-ink">Getting the digital ink</a> </li> <li> <a href="#converting-ink-into-a-myscript-compliant-format">Converting ink into a MyScript-compliant format</a> </li> <li> <a href="#sending-the-ink-1">Sending the ink</a> </li> </ul> </li> <li> <a href="#running-the-recognition">Running the recognition</a> </li> <li> <a href="#getting-the-result">Getting the result</a> </li> <li> <a href="#cleaning-up">Cleaning up</a> </li> </ul> <a class="back-to-top" href="#top">Back to top</a> </nav> </aside> </div> </div> </main> <footer class="container footer"> <hr> <p>Copyright © 2016 MyScript&reg;. All Rights Reserved</p> </footer> </body> </html>